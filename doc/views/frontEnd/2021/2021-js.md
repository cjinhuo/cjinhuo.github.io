---
title: '2021-JS'
  # 大标题
sidebarDepth: 2
sidebar: auto
categories: hobby
date: 2021-05-27
# 时间
tags:
- JS
---

## 函数柯里化
柯里化（Currying）是把接受多个参数的函数变换成接受一个单一参数(最初函数的第一个参数)的函数，并且返回接受余下的参数且返回结果的新函数的技术。通俗点说就是将一个函数拆分成多个函数，是固定部分参数，返回一个接受剩余参数的函数，也称为部分计算函数，目的是为了缩小适用范围，创建一个针对性更强的函数。

**主要是为了增加函数的可复用性**


### 解释器
由于JS是解释型语言，JS引擎需要逐行编译为可执行的代码，可执行的代码有很多形式，其中叫较为常见的有基于`AST`直接执行及`ByteCode`的执行方式


## 异或
XOR是`exclusive OR`的缩写。英语的exclusive意思是”专有的、独有的“，可以理解为XOR是更单纯的OR运算。

我们知道，OR 运算的运算子有两种情况，计算结果为true。

（1）一个为 true，另一个为 false;

（2）两个都为 true。

上面两种情况，有时候需要明确区分，所以引入了 XOR。

XOR 排除了第二种情况，只有第一种情况（一个运算子为true，另一个为false）才会返回 true，所以可以看成是更单纯的 OR 运算。也就是说， XOR 主要用来判断两个值是否不同。

[阮一峰的XOR文章](https://www.ruanyifeng.com/blog/2021/01/_xor.html)

## JS与native交互
### Android调用JS代码
1. 通过WebView的loadUrl()
2. 通过WebView的evaluateJavaScript()

### JS调用Android代码
1. 通过WebView的addJavascriptInterface（）进行对象映射
2. 通过 WebViewClient 的shouldOverrideUrlLoading ()方法回调拦截 url
3. 通过 WebChromeClient 的onJsAlert()、onJsConfirm()、onJsPrompt（）方法回调拦截JS对话框alert()、confirm()、prompt（） 消息

## script中的async和defer
[async和defer区别](https://juejin.cn/post/6894629999215640583)

## 栈和堆
### 为什么一定要分“堆”和“栈”两个存储空间？
因为JS引擎需要用栈来维护程序执行期间上下文的状态，如果栈空间大了的话，所有的数据都存放栈空间中，那么会影响到上下文切换的效率，进而又影响到整个程序的执行效率。


### 闭包是存在与堆中
以 JavaScript 引擎判断这是一个闭包，于是在堆空间创建换一个“closure(something)”的对象（这是一个内部对象，JavaScript 是无法访问的）

## 符号
### ??
空值合并操作符（??），只有当左侧为null和undefined时，才会返回右侧的数空值合并操作符（??）是一个逻辑操作符，当左侧的操作数为`null`或者`undefined`时，返回其右侧操作数，否则返回左侧操作数。

### ||
逻辑或操作符会在左侧操作数为假值时返回右侧操作数。也就是说，如果使用 || 来为某些变量设置默认值，可能会遇到意料之外的行为。比如为假值（例如，'' 或 0）时，**||有点像if后面括号的判断**

## JIT(Just In Time)
JIT(动态编译)是JavaScript的一个重要特性，它可以让JavaScript在运行时动态编译，从而提高程序的运行效率。

**优点**：
1. 可以根据当前硬件情况实时编译生成最优机器指令（ps. AOT也可以做到，在用户使用是使用字节码根据机器情况在做一次编译）
2. 可以根据进程中内存的实际情况调整代码，使内存能够更充分的利用


**缺点**：
1. 编译需要占用运行时资源，会导致进程卡顿
2. 由于编译时间需要占用运行时间，对于某些代码的编译优化不能完全支持，需要在程序流畅和编译时间之间做权衡
3. 在编译准备和识别频繁使用的方法需要占用时间，使得初始编译不能达到最高性能

## AOT（Ahead Of Time）
AOT（静态编译）是一种编译技术，它将JavaScript代码编译成机器码，然后将编译后的机器码放到一个独立的文件中，这样在运行时可以直接运行这个独立文件，不再需要编译。

**优点**：
1. 在程序运行前编译，可以避免在运行时编译性能的消耗和内存消耗
2. 可以在程序运行初期就达到最高性能，并加快程序的启动

**缺点：**
1. 在程序运行前编译会使程序安装的时间增加
2. 在编码时编译所以会占内存占外存大
