---
title: 'Serverless'
  # 大标题
sidebarDepth: 2
sidebar: auto
categories: hobby
date: 2021-06-06
# 时间
tags:
- Serverless
# 标签
---

::: tip 概述
直接翻译过来就是无服务器。根据CNCF的定义，Serveless是指构建和运行不需要服务器管理的应用程序的概念。Serverless = FaaS + BaaS
:::

## FaaS（Function as a Service）
1. FaaS里的应用逻辑单元都可以看作是一个函数，开发人员只关注如何实现这些逻辑，而不用提前考虑性能优化，让工作聚焦在这个函数里，而非应用整体
2. FaaS是无状态的。无状态意味着本地内存、磁盘里的数据无法被后续的操作所使用。大部分状态需要依赖于外部存储，比如数据库、redis
3. FaaS的函数应当快速启动执行，并拥有短暂的生命周期。函数在有限的时间里启动并处理任务，并在返回执行结果后终止。如果它执行时间超过了某个阀值，也应该被终止
4. FaaS函数启动延时受很多因素的干扰。以AWS Lambda为例，如果采用了JS或Python实现了函数，它的启动时间一般不会超过10~100毫秒。但如果是实现在JVM上的函数，当遇到突发的大流量或者调用间隔过长的情况，启动时间会显著变长。
5. FaaS需要借助于API Gateway将请求的路由和对应的处理函数进行映射，并将响应结果代理返回给调用方。

## BaaS（Backend as a Service）
BaaS（Backend as a Service，后端即服务）是指我们不再编写和/或管理所有服务端组件。与虚拟实例和容器相比，在概念上它更接近SaaS（软件即服务）。SaaS主要是业务流程的外包——HR、销售工具，或者从技术端来讲，像Github这样的产品，而BaaS则是要把应用拆分为更小的颗粒，其中一部分完全使用外部产品实现。

BaaS 服务都是领域通用的远程组件（而不是进程内的库，比如：redis、mysql、MQ、ES），可以以 API 的形式使用，深受移动 App 或者单页Web app开发团队的欢迎。因为这些团队通常会使用大量的第三方服务，否则他们就要自己花很多精力做这些事情。我们来看一些例子。

Google Firebase是完全由云厂商（Google）管理的数据库，可以直接在移动或者Web应用中使用，而无须经过我们自己的中间层应用服务器。这解释了BaaS的一个方面：用服务替我们管理数据组件。

BaaS服务还允许我们倚赖其他人已经实现的应用逻辑。对于这点，认证就是一个很好的例子。很多应用都要自己编写实现注册、登录、密码管理等逻辑的代码，而其实对于不同的应用这些代码往往大同小异。完全可以把这些重复性的工作提取出来，再做成外部服务，而这正是Auth0和Amazon Cognito等产品的目标。它们能实现全面的认证和用户管理，开发团队再也不用自己编写或者管理实现这些功能的代码。


## 优点
::: tip Serveless
FaaS+BaaS就等于Serveless的概念，一个完全Serverless的app不需要你考虑架构中的任何东西。你的应用逻辑——不管是自己编程实现，还是使用第三方服务集成——运行在一个完全弹性的操作环境里。你的状态也是以同样弹性的形式存储的。

主流程：在FaaS中调用BaaS的东西，然后编辑你的逻辑代码，最终返回数据
:::
1. 减少开支
通过购买共享的基础设施，同时减少了花费在运维上的人力成本，最终减少了开支。

2. 减轻负担
不再需要重复造轮子，需要什么功能直接集成调用即可，也无需考虑整体的性能，只专注于业务代码的实现。

3. 易于扩展
云上提供了自动的弹性扩展，用了多少计算资源，就购买多少，完全按需付费。

4. 简化管理
自动化的弹性扩展、减少了打包和部署的复杂度、可以快速推向市场，这些都让管理变得简单高效。

5. 环保计算
即使在云的环境上，仍习惯于购买多余的服务器，最终导致空闲。Serverless杜绝了这种情况。





