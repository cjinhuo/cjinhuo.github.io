<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>初级前端工程师 | cjinhuo</title>
    <meta name="description" content="Searching for meaning">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.38133fe5.css" as="style"><link rel="preload" href="/assets/js/app.6ab3bd45.js" as="script"><link rel="preload" href="/assets/js/3.1aa11fd0.js" as="script"><link rel="preload" href="/assets/js/1.26bd7cad.js" as="script"><link rel="preload" href="/assets/js/9.3fc43e54.js" as="script"><link rel="prefetch" href="/assets/js/10.9cb6f13d.js"><link rel="prefetch" href="/assets/js/11.66eff312.js"><link rel="prefetch" href="/assets/js/12.14d56f47.js"><link rel="prefetch" href="/assets/js/13.26a79d4a.js"><link rel="prefetch" href="/assets/js/14.d4f2bc98.js"><link rel="prefetch" href="/assets/js/15.8f9af50a.js"><link rel="prefetch" href="/assets/js/16.acc58b5a.js"><link rel="prefetch" href="/assets/js/17.cb15164c.js"><link rel="prefetch" href="/assets/js/18.25ea093d.js"><link rel="prefetch" href="/assets/js/19.144ebaaf.js"><link rel="prefetch" href="/assets/js/20.dc2a0e31.js"><link rel="prefetch" href="/assets/js/21.9f03c49b.js"><link rel="prefetch" href="/assets/js/22.d24ea352.js"><link rel="prefetch" href="/assets/js/23.42bc5d45.js"><link rel="prefetch" href="/assets/js/24.a6e6f5af.js"><link rel="prefetch" href="/assets/js/25.55a03e42.js"><link rel="prefetch" href="/assets/js/26.9278ba54.js"><link rel="prefetch" href="/assets/js/27.5509dbe4.js"><link rel="prefetch" href="/assets/js/28.bb937a94.js"><link rel="prefetch" href="/assets/js/29.bc802a00.js"><link rel="prefetch" href="/assets/js/30.80e99d7f.js"><link rel="prefetch" href="/assets/js/31.6fef4a51.js"><link rel="prefetch" href="/assets/js/32.e55ac13f.js"><link rel="prefetch" href="/assets/js/33.cec3754d.js"><link rel="prefetch" href="/assets/js/34.d194e60b.js"><link rel="prefetch" href="/assets/js/35.f3b01d4d.js"><link rel="prefetch" href="/assets/js/36.45de4d62.js"><link rel="prefetch" href="/assets/js/37.df082a39.js"><link rel="prefetch" href="/assets/js/38.c7f1b02e.js"><link rel="prefetch" href="/assets/js/39.1b23a30c.js"><link rel="prefetch" href="/assets/js/4.939d3c7b.js"><link rel="prefetch" href="/assets/js/40.8f532f4a.js"><link rel="prefetch" href="/assets/js/41.afed87fb.js"><link rel="prefetch" href="/assets/js/42.07429437.js"><link rel="prefetch" href="/assets/js/43.2a8025e8.js"><link rel="prefetch" href="/assets/js/44.8460e435.js"><link rel="prefetch" href="/assets/js/45.290ef632.js"><link rel="prefetch" href="/assets/js/46.0598768c.js"><link rel="prefetch" href="/assets/js/47.0a62623a.js"><link rel="prefetch" href="/assets/js/48.db257cea.js"><link rel="prefetch" href="/assets/js/49.a53c5f9b.js"><link rel="prefetch" href="/assets/js/5.f342c926.js"><link rel="prefetch" href="/assets/js/50.d9c19c8f.js"><link rel="prefetch" href="/assets/js/6.061ab7cd.js"><link rel="prefetch" href="/assets/js/7.d789f849.js"><link rel="prefetch" href="/assets/js/8.e3c85822.js">
    <link rel="stylesheet" href="/assets/css/0.styles.38133fe5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-146b4d24><div data-v-146b4d24><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-146b4d24 data-v-146b4d24><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-146b4d24 data-v-146b4d24><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>cjinhuo</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>cjinhuo</span>
            
          <span data-v-64685f0e>2019 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-146b4d24><header class="navbar" data-v-146b4d24><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/avatar.png" alt="cjinhuo" class="logo"> <span class="site-name">cjinhuo</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/frontEnd/" class="nav-link"><i class="iconfont undefined"></i>
  frontEnd
</a></li><li class="dropdown-item"><!----> <a href="/categories/hobby/" class="nav-link"><i class="iconfont undefined"></i>
  hobby
</a></li><li class="dropdown-item"><!----> <a href="/categories/end/" class="nav-link"><i class="iconfont undefined"></i>
  end
</a></li><li class="dropdown-item"><!----> <a href="/categories/work/" class="nav-link"><i class="iconfont undefined"></i>
  work
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/cjinhuo" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/3421335917434744/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-juejin"></i>
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/~chenjinhuo" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-npm"></i>
  NPM
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/doudoublog/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bokeyuan"></i>
  博客圆
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-146b4d24></div> <aside class="sidebar" data-v-146b4d24><div class="personal-info-wrapper" data-v-b038cec6><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-b038cec6> <h3 class="name" data-v-b038cec6>
    cjinhuo
  </h3> <div class="num" data-v-b038cec6><div data-v-b038cec6><h3 data-v-b038cec6>36</h3> <h6 data-v-b038cec6>Article</h6></div> <div data-v-b038cec6><h3 data-v-b038cec6>49</h3> <h6 data-v-b038cec6>Tag</h6></div></div> <hr data-v-b038cec6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/frontEnd/" class="nav-link"><i class="iconfont undefined"></i>
  frontEnd
</a></li><li class="dropdown-item"><!----> <a href="/categories/hobby/" class="nav-link"><i class="iconfont undefined"></i>
  hobby
</a></li><li class="dropdown-item"><!----> <a href="/categories/end/" class="nav-link"><i class="iconfont undefined"></i>
  end
</a></li><li class="dropdown-item"><!----> <a href="/categories/work/" class="nav-link"><i class="iconfont undefined"></i>
  work
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/cjinhuo" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/3421335917434744/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-juejin"></i>
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/~chenjinhuo" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-npm"></i>
  NPM
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/doudoublog/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bokeyuan"></i>
  博客圆
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>初级前端工程师</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/frontEnd/2019/interview.html#js中for-in与for-of之间的差异" class="sidebar-link">js中for in与for of之间的差异</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#扩展运算符" class="sidebar-link">扩展运算符...</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#是浅拷贝" class="sidebar-link">...是浅拷贝</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#栈和堆" class="sidebar-link">栈和堆</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#深拷贝" class="sidebar-link">深拷贝</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#数组的扩展运算符" class="sidebar-link">数组的扩展运算符</a></li></ul></li><li><a href="/views/frontEnd/2019/interview.html#js-事件模式" class="sidebar-link">JS 事件模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#发布订阅" class="sidebar-link">发布订阅</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#观察者" class="sidebar-link">观察者</a></li></ul></li><li><a href="/views/frontEnd/2019/interview.html#去重数组" class="sidebar-link">去重数组</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#vue兄弟间怎么检测数据变换" class="sidebar-link">Vue兄弟间怎么检测数据变换</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#用indexof来实现简易版的include" class="sidebar-link">用indexOf来实现简易版的include</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#排序对象数组" class="sidebar-link">排序对象数组</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#正则表达式" class="sidebar-link">正则表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#中文" class="sidebar-link">中文</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#string-match" class="sidebar-link">String.match</a></li></ul></li><li><a href="/views/frontEnd/2019/interview.html#nan" class="sidebar-link">NaN</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#img-的title和alt有什么区别" class="sidebar-link">&lt;img&gt;的title和alt有什么区别</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#跨域的问题" class="sidebar-link">跨域的问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#解决跨域的方法" class="sidebar-link">解决跨域的方法</a></li></ul></li><li><a href="/views/frontEnd/2019/interview.html#js有哪几种方式里检查数据类型：" class="sidebar-link">js有哪几种方式里检查数据类型：</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#typeof" class="sidebar-link">typeof</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#instanceof" class="sidebar-link">instanceof</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#constructor-构造器" class="sidebar-link">constructor 构造器</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#prototype-tostring" class="sidebar-link">prototype.toString</a></li></ul></li><li><a href="/views/frontEnd/2019/interview.html#web安全" class="sidebar-link">WEB安全</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#dns欺骗攻击" class="sidebar-link">DNS欺骗攻击</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#ddos攻击" class="sidebar-link">DDOS攻击</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#xss" class="sidebar-link">XSS</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#csrf攻击" class="sidebar-link">CSRF攻击</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#syn-flooding攻击" class="sidebar-link">SYN Flooding攻击</a></li></ul></li><li><a href="/views/frontEnd/2019/interview.html#dom事件中target，currenttarget的区别" class="sidebar-link">dom事件中target，currentTarget的区别</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#vue的双向绑定" class="sidebar-link">vue的双向绑定</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#array-prototype-sort" class="sidebar-link">Array.prototype.sort</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#闭包" class="sidebar-link">闭包</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#编写一个javascript函数，传入一个数组，对数组中的元素进行去重并返回一个无重复元素的数组，数组的元素可以是数字、字符串、数组和对象。举例说明：" class="sidebar-link">编写一个Javascript函数，传入一个数组，对数组中的元素进行去重并返回一个无重复元素的数组，数组的元素可以是数字、字符串、数组和对象。举例说明：</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#和-运算符判断相等的流程是怎样的" class="sidebar-link">===和==运算符判断相等的流程是怎样的</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#" class="sidebar-link">===</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#-2" class="sidebar-link">==</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#object-js和" class="sidebar-link">Object.js和===</a></li></ul></li><li><a href="/views/frontEnd/2019/interview.html#async-await" class="sidebar-link">async/await</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#null-undefined" class="sidebar-link">null &amp;&amp; undefined</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#number-parseint-parsefloat" class="sidebar-link">Number &amp;&amp; parseInt &amp;&amp; parseFloat</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#number" class="sidebar-link">Number</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#parseint" class="sidebar-link">parseInt</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#parsefloat" class="sidebar-link">parseFloat</a></li></ul></li><li><a href="/views/frontEnd/2019/interview.html#event-loop" class="sidebar-link">Event Loop</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#macrotask（宏任务）" class="sidebar-link">MacroTask（宏任务）</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#microtask（微任务）" class="sidebar-link">MicroTask（微任务）</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#浏览器中的event-loop" class="sidebar-link">浏览器中的Event Loop</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#js调用栈" class="sidebar-link">JS调用栈</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#同步任务和异步任务" class="sidebar-link">同步任务和异步任务</a></li></ul></li><li><a href="/views/frontEnd/2019/interview.html#形参-默认参数" class="sidebar-link">形参&amp;&amp;默认参数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#js中的捕获和冒泡" class="sidebar-link">JS中的捕获和冒泡</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#seal-freeze-preventextensions" class="sidebar-link">seal &amp;&amp; freeze &amp;&amp; preventExtensions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#object-seal" class="sidebar-link">Object.seal</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#object-freeze" class="sidebar-link">Object.freeze</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#object-preventextensions" class="sidebar-link">Object.preventExtensions</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#结论" class="sidebar-link">结论</a></li></ul></li><li><a href="/views/frontEnd/2019/interview.html#伪类-伪元素" class="sidebar-link">伪类&amp;&amp;伪元素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#伪类" class="sidebar-link">伪类</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#伪元素" class="sidebar-link">伪元素</a></li></ul></li><li><a href="/views/frontEnd/2019/interview.html#json-parse" class="sidebar-link">JSON.parse</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#json-stringify" class="sidebar-link">JSON.stringify</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/frontEnd/2019/interview.html#浏览器缓存" class="sidebar-link">浏览器缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#last-modify" class="sidebar-link">Last-Modify</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#expires" class="sidebar-link">Expires</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#cache-control" class="sidebar-link">Cache-Control</a></li><li class="sidebar-sub-header"><a href="/views/frontEnd/2019/interview.html#etag" class="sidebar-link">ETag</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-146b4d24><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>初级前端工程师</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>cjinhuo</span>
            
          <span data-v-64685f0e>2019 - </span>
          2021
        </a></span></div></div> <div data-v-146b4d24><main class="page"><div class="page-title" style="display:none;"><h1>初级前端工程师</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>cjinhuo</span></i> <!----> <!----> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      前端基础
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="js中for-in与for-of之间的差异"><a href="#js中for-in与for-of之间的差异" class="header-anchor">#</a> js中for in与for of之间的差异</h2> <p>let aArray = ['a',123,{a:1,b:2}]</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>for(let index in aArray){
    console.log(index);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>输出: 0 1 2 说明遍历的是index，</p> <h2 id="扩展运算符"><a href="#扩展运算符" class="header-anchor">#</a> 扩展运算符...</h2> <div class="custom-block tip"><p class="custom-block-title">对扩展运算符的理解</p> <p>对象中的扩展运算符(...)用于取出参数对象中的所有可遍历属性，拷贝到当前对象之中</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> baz <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>bar <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// { a: 1, b: 2 }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面的方法实际上就等于</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> baz <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> bar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { a: 1, b: 2 }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Object.assign方法的第一个参数是目标对象，后面的参数都是源对象。(如果目标对象与源对象有同名属性，或多个源对象有同名属性，则后面的属性会覆盖前面的属性)。<br>
同样，如果用户自定义的属性，放在扩展运算符后面，则扩展运算符内部的同名属性会被覆盖掉。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> baz <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>bar<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">{</span>a<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// {a: 2, b: 4}</span>
baz<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span> <span class="token comment">// {a: 1, b: 2};</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>baz<span class="token punctuation">)</span> <span class="token comment">// {a: 10, b: 2};</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="是浅拷贝"><a href="#是浅拷贝" class="header-anchor">#</a> ...是浅拷贝</h3> <p>我们看个例子</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token punctuation">{</span>one<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>two<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> baz <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>bar<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span> <span class="token comment">// { a: 1, b: { one: 1, two: 2 } }</span>
baz<span class="token punctuation">.</span>b<span class="token punctuation">.</span>one <span class="token operator">=</span> <span class="token number">10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'baz'</span><span class="token punctuation">,</span>baz<span class="token punctuation">)</span> <span class="token comment">// baz { a: 1, b: { one: 10, two: 2 } }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span>bar<span class="token punctuation">)</span> <span class="token comment">// bar { a: 1, b: { one: 10, two: 2 } }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">基础数据类型与引用类型</p> <p>javascript中有两种数据类型，分别是基础数据类型和引用数据类型。基础数据类型是按值访问的，常见的基础数据类型有<code>Number</code>、<code>String</code>、<code>Boolean</code>、<code>Null</code>、<code>Undefined</code>，这类变量的拷贝的时候会完整的复制一份；引用数据类型比如<code>Array</code>、<code>Object</code>,<code>symbol</code>，在拷贝的时候拷贝的是对象的引用，当原对象发生变化的时候，拷贝对象也跟着变化。</p></div> <p>为什么分成基础数据类型和引用类型，这就要扯到了栈内存和堆内存。</p> <h3 id="栈和堆"><a href="#栈和堆" class="header-anchor">#</a> 栈和堆</h3> <div class="custom-block tip"><p class="custom-block-title">栈和堆概述</p> <p>栈区（stack）— 由编译器自动分配释放 ，存放函数的参数值，局部变量的值等。其操作方式类似于数据结构中的栈。
堆区（heap） — 一般由程序员分配释放， 若程序员不释放，程序结束时可能由OS回收 。注意它与数据结构中的堆是两回事，分配方式倒是类似于链表</p></div> <p>基础数据类型是放在栈内存，引用类型是放在堆内存，两个图就理解了:
栈内存：
<img src="/assets/img/stack.68cac57a.jpg" alt="">
堆内存：
<img src="/assets/img/heap.2466da9e.jpg" alt="">
这就引出了浅拷贝与深拷贝，正常拷贝基础数据类型（也称为值类型）时，是直接拷贝目标值，拷贝引用类型时是拷贝引用地址。</p> <div class="custom-block tip"><p class="custom-block-title">浅拷贝与深拷贝</p> <p>浅拷贝:拷贝对象的引用，而不是在内存新建一块内存。
深拷贝:将对象的所有值拷贝一份放在新建的内存，这样两块内存互不干涉。</p></div> <h3 id="深拷贝"><a href="#深拷贝" class="header-anchor">#</a> 深拷贝</h3> <p>深拷贝也经常被用到，我常用的是JSON.parse(JSON.stringify())</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token punctuation">{</span>one<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>two<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> baz <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">)</span>
baz<span class="token punctuation">.</span>b<span class="token punctuation">.</span>one <span class="token operator">=</span> <span class="token number">10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'baz'</span><span class="token punctuation">,</span>baz<span class="token punctuation">)</span> <span class="token comment">// baz { a: 1, b: { one: 10, two: 2 } }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span>bar<span class="token punctuation">)</span> <span class="token comment">// bar { a: 1, b: { one: 1, two: 2 } }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>现在就是深拷贝了。但是这样有很多问题，比如当对象里面的值是函数、正则表达式循环引用时就会出现BUG。</p> <p><strong>简单版的深拷贝（大多在面试中写出来）</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// WeakSet 适合临时存放一组对象，以及存放跟对象绑定的信息。只要这些对象在外部消失，它在 WeakSet 里面的引用就会自动消失</span>
  <span class="token keyword">const</span> hashStack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">recursion</span> <span class="token operator">=</span> <span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hashStack<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> obj
    hashStack<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> value <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
      <span class="token comment">// 假设只考虑object array</span>
      result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> <span class="token function">recursion</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">:</span> value
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">recursion</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 构造函数</span>
<span class="token keyword">function</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token parameter">pname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> pname<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> Messi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person</span><span class="token punctuation">(</span><span class="token string">'Messi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 函数</span>
<span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> oldObj <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> say<span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  c<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'ab+c'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  d<span class="token operator">:</span> Messi
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> newObj <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>oldObj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 无法复制函数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">.</span>a<span class="token punctuation">,</span> oldObj<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined [Function: say]</span>
<span class="token comment">// 稀疏数组复制错误</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">.</span>b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> oldObj<span class="token punctuation">.</span>b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null undefined</span>
<span class="token comment">// 无法复制正则对象</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">.</span>c<span class="token punctuation">,</span> oldObj<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {} /ab+c/i</span>
<span class="token comment">// 构造函数指向错误</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">.</span>d<span class="token punctuation">.</span>constructor<span class="token punctuation">,</span> oldObj<span class="token punctuation">.</span>d<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [Function: Object] [Function: person]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>所以我们得自己来构造一个深拷贝函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token keyword">const</span> <span class="token function-variable function">isType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> typeString <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> flag<span class="token punctuation">;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'Array'</span><span class="token operator">:</span>
      flag <span class="token operator">=</span> typeString <span class="token operator">===</span> <span class="token string">'[object Array]'</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'Date'</span><span class="token operator">:</span>
      flag <span class="token operator">=</span> typeString <span class="token operator">===</span> <span class="token string">'[object Date]'</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'RegExp'</span><span class="token operator">:</span>
      flag <span class="token operator">=</span> typeString <span class="token operator">===</span> <span class="token string">'[object RegExp]'</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> flag<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">getRegExp</span> <span class="token operator">=</span> <span class="token parameter">re</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> flags <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>re<span class="token punctuation">.</span>global<span class="token punctuation">)</span> flags <span class="token operator">+=</span> <span class="token string">'g'</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>re<span class="token punctuation">.</span>ignoreCase<span class="token punctuation">)</span> flags <span class="token operator">+=</span> <span class="token string">'i'</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>re<span class="token punctuation">.</span>multiline<span class="token punctuation">)</span> flags <span class="token operator">+=</span> <span class="token string">'m'</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> flags<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">/**
* deep clone
* @param  {[type]} parent object 需要进行克隆的对象
* @return {[type]}        深克隆后的对象
*/</span>
<span class="token keyword">const</span> <span class="token function-variable function">clone</span> <span class="token operator">=</span> <span class="token parameter">parent</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 维护两个储存循环引用的数组</span>
  <span class="token keyword">const</span> parents <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">_clone</span> <span class="token operator">=</span> <span class="token parameter">parent</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> parent <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> parent<span class="token punctuation">;</span>

    <span class="token keyword">let</span> child<span class="token punctuation">,</span> proto<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isType</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> <span class="token string">'Array'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 对数组做特殊处理</span>
      child <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isType</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> <span class="token string">'RegExp'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 对正则对象做特殊处理</span>
      child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>source<span class="token punctuation">,</span> <span class="token function">getRegExp</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span> child<span class="token punctuation">.</span>lastIndex <span class="token operator">=</span> parent<span class="token punctuation">.</span>lastIndex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isType</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> <span class="token string">'Date'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 对Date对象做特殊处理</span>
      child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 处理对象原型</span>
      proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 利用Object.create切断原型链</span>
      child <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 处理循环引用</span>
    <span class="token keyword">const</span> index <span class="token operator">=</span> parents<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果父数组存在本对象,说明之前已经被引用过,直接返回此对象</span>
      <span class="token keyword">return</span> children<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    parents<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 递归</span>
      child<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">_clone</span><span class="token punctuation">(</span>parent<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> child<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">_clone</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token parameter">pname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> pname<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> Messi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person</span><span class="token punctuation">(</span><span class="token string">'Messi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> oldObj <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> say<span class="token punctuation">,</span>
  c<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'ab+c'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  d<span class="token operator">:</span> Messi<span class="token punctuation">,</span>
  f<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
oldObj<span class="token punctuation">.</span>b <span class="token operator">=</span> oldObj<span class="token punctuation">;</span>
<span class="token keyword">const</span> newObj <span class="token operator">=</span> <span class="token function">clone</span><span class="token punctuation">(</span>oldObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">.</span>a<span class="token punctuation">,</span> oldObj<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [Function: say] [Function: say]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">.</span>b<span class="token punctuation">,</span> oldObj<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { a: [Function: say], c: /ab+c/i, d: person { name: 'Messi' }, b: [Circular] } { a: [Function: say], c: /ab+c/i, d: person { name: 'Messi' }, b: [Circular] }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">.</span>c<span class="token punctuation">,</span> oldObj<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// /ab+c/i /ab+c/i</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">.</span>d<span class="token punctuation">.</span>constructor<span class="token punctuation">,</span> oldObj<span class="token punctuation">.</span>d<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [Function: person] [Function: person]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br></div></div><h3 id="数组的扩展运算符"><a href="#数组的扩展运算符" class="header-anchor">#</a> 数组的扩展运算符</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">...</span>numbers<span class="token punctuation">)</span> <span class="token comment">// 42</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>还可以复制数组，但还是浅复制，因为数组也是引用类型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> arr1<span class="token punctuation">;</span>
arr2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
arr1 <span class="token comment">// [2, 2]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ES6有个新特效是解构复制，配合扩展运算符很好用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
first <span class="token comment">// 1</span>
rest  <span class="token comment">// [2, 3, 4, 5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block danger"><p>如果将扩展运算符用于数组赋值，只能放在参数的最后一位，否则会报错。</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token operator">...</span>rest<span class="token punctuation">,</span> last<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 报错</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">,</span> last<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 报错</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>扩展运算符还可以将字符串转为真正的数组</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token operator">...</span><span class="token string">'hello'</span><span class="token punctuation">]</span>
<span class="token comment">// [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="js-事件模式"><a href="#js-事件模式" class="header-anchor">#</a> JS 事件模式</h2> <div class="custom-block tip"><p class="custom-block-title">区别</p> <p>共同点：两者都可订阅，然后接受消息<br>
发布/订阅:一种一对多的依赖关系，由发布者、订阅者、消息管理器三部分组成，松耦合的状态（有key值对应的回调函数）<br>
观察者:将订阅者依附在目标对象身上，在发布时直接调用目标内容进行输出，一种一对多的依赖关系，紧耦合的状态（无key值对应回调函数）<br></p></div> <h3 id="发布订阅"><a href="#发布订阅" class="header-anchor">#</a> 发布订阅</h3> <p><img src="data:image/png;base64,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" alt=""></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> event <span class="token operator">=</span> <span class="token punctuation">{</span>
  clientList<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">listen</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>   <span class="token comment">// 订阅的消息添加进缓存列表</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> money</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> fns <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientList<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token comment">// 相当于简单的消息管理，过滤订阅信息</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fns <span class="token operator">||</span> fns<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果没有绑定对应的消息</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    fns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>money<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 再定义一个installEvent函数，用于给所有对象动态安装发布-订阅功能</span>
<span class="token comment">// 如：另一家售楼处也想要这个功能，就可以调用这个注册了，不同再写多一次这段代码</span>
<span class="token keyword">let</span> <span class="token function-variable function">installEvent</span> <span class="token operator">=</span> <span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> event<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 给售楼处对象salesOffices动态增加发布-订阅功能</span>
<span class="token keyword">let</span> salesOffices <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">installEvent</span><span class="token punctuation">(</span>salesOffices<span class="token punctuation">)</span>
<span class="token comment">// 小明订阅信息</span>
salesOffices<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'squareMeter88'</span><span class="token punctuation">,</span> <span class="token parameter">price</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'小明，你看中的88平方的房子，价格='</span> <span class="token operator">+</span> price<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 小光订阅信息</span>
salesOffices<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'squareMeter88'</span><span class="token punctuation">,</span> <span class="token parameter">price</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'小光，你看中的88平方的房子，价格='</span> <span class="token operator">+</span> price<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 小红订阅信息</span>
salesOffices<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'squareMeter100'</span><span class="token punctuation">,</span> <span class="token parameter">price</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'小红，你看中的100平方的房子，价格='</span> <span class="token operator">+</span> price<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 小明，你看中的88平方的房子，价格=2000000</span>
<span class="token comment">// 小光，你看中的88平方的房子，价格=2000000</span>
salesOffices<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'squareMeter88'</span><span class="token punctuation">,</span> <span class="token number">2000000</span><span class="token punctuation">)</span>
<span class="token comment">// 小红，你看中的100平方的房子，价格=2500000</span>
salesOffices<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'squareMeter100'</span><span class="token punctuation">,</span> <span class="token number">2500000</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h3 id="观察者"><a href="#观察者" class="header-anchor">#</a> 观察者</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> Ob <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Ob<span class="token punctuation">.</span>list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token comment">// 订阅后返回一个id，用于删除该订阅内容</span>
Ob<span class="token punctuation">.</span><span class="token function-variable function">subscibe</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> id <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100000</span> <span class="token operator">+</span> <span class="token number">1</span>
  Ob<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    id<span class="token punctuation">,</span>
    fn
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> id
<span class="token punctuation">}</span>
Ob<span class="token punctuation">.</span><span class="token function-variable function">publish</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> v <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    v<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
Ob<span class="token punctuation">.</span><span class="token function-variable function">delete</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> one <span class="token operator">=</span> Ob<span class="token punctuation">.</span><span class="token function">subscibe</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我想的颜色'</span> <span class="token operator">+</span> color<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 我想的颜色red</span>
Ob<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span>
Ob<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>one<span class="token punctuation">)</span>
<span class="token comment">// 没有输出</span>
Ob<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'blue'</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="去重数组"><a href="#去重数组" class="header-anchor">#</a> 去重数组</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">dedupe</span><span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">dedupe</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="vue兄弟间怎么检测数据变换"><a href="#vue兄弟间怎么检测数据变换" class="header-anchor">#</a> Vue兄弟间怎么检测数据变换</h2> <ol><li>在有些情况下可以用路由传参</li> <li>用Vuex作为载体传参、监听</li> <li>用兄弟的父元素来监听两个子组件的变换统一分配数据</li></ol> <h2 id="用indexof来实现简易版的include"><a href="#用indexof来实现简易版的include" class="header-anchor">#</a> 用indexOf来实现简易版的include</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myIncludes</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="排序对象数组"><a href="#排序对象数组" class="header-anchor">#</a> 排序对象数组</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">compareAscending</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">propName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj1<span class="token punctuation">,</span> obj2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> val1 <span class="token operator">=</span> obj1<span class="token punctuation">[</span>propName<span class="token punctuation">]</span>
    <span class="token keyword">var</span> val2 <span class="token operator">=</span> obj2<span class="token punctuation">[</span>propName<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>val1 <span class="token operator">&lt;</span> val2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>val1 <span class="token operator">&gt;</span> val2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">compareDescending</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">propName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj1<span class="token punctuation">,</span> obj2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> val1 <span class="token operator">=</span> obj1<span class="token punctuation">[</span>propName<span class="token punctuation">]</span>
    <span class="token keyword">var</span> val2 <span class="token operator">=</span> obj2<span class="token punctuation">[</span>propName<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>val1 <span class="token operator">&gt;</span> val2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>val1 <span class="token operator">&lt;</span> val2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 调用</span>
<span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token comment">// 传入属性名</span>
t<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token function">compareDescending</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h2 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h2> <h3 id="中文"><a href="#中文" class="header-anchor">#</a> 中文</h3> <div class="custom-block tip"><p class="custom-block-title">中文正则</p> <p>“\u4e00”和“\u9fa5”是unicode编码，并且正好是中文编码的开始和结束的两个值，所以这个正则表达式可以用来判断字符串中是否包含中文</p></div> <p>匹配中文就可以用:<code>/^[\u4e00-\u9fa5]/</code></p> <h3 id="string-match"><a href="#string-match" class="header-anchor">#</a> String.match</h3> <p>会返回一个有数组对象，下标0表示你的正则全匹配的值，如果你有在正则里面添加分组的话，就有新增下标1、下标2。。。，一个()就是一个分组
<img src="/assets/img/reg_01.1108af98.png" alt=""></p> <h2 id="nan"><a href="#nan" class="header-anchor">#</a> NaN</h2> <div class="custom-block tip"><p class="custom-block-title">NaN</p> <p>NaN是全局属性，初始值就是NaN和Number.NaN的值是一样的，NaN和任何值都不相等，包括自身。可以通过x!==x来判断是否为NaN，为true就是NaN</p></div> <p>基本都没用到NaN，只是有时判断的时候有用到</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;blabla&quot;</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>
Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>
<span class="token string">'A'</span> <span class="token operator">-</span> <span class="token string">'B'</span> <span class="token comment">// NaN</span>
<span class="token number">1</span> <span class="token operator">+</span> <span class="token operator">-</span><span class="token string">'1'</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// 1 负号把'1'数字化了</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="img-的title和alt有什么区别"><a href="#img-的title和alt有什么区别" class="header-anchor">#</a> &lt;img&gt;的title和alt有什么区别</h2> <ul><li>title是global attributes之一，用于为元素提供附加的advisory information。通常当鼠标滑动到元素上的时候显示。</li> <li>alt是&lt;img&gt;的特有属性，是图片内容的等价描述，用于图片无法加载时显示、读屏器阅读图片。可提图片高可访问性，除了纯装饰图片外都必须设置有意义的值，搜索引擎会重点分析。（理解，可以自己讲出就好）</li></ul> <h2 id="跨域的问题"><a href="#跨域的问题" class="header-anchor">#</a> 跨域的问题</h2> <div class="custom-block tip"><p class="custom-block-title">什么情况下会产生跨域</p> <ul><li>协议不相同</li> <li>域名不相同</li> <li>端口不相同</li></ul></div> <p>满足其中一个就会产生跨域。<br>
跨域通信：js进行DOM操作、通信时如果目标与当前窗口不满足同源条件，浏览器为了安全会阻止跨域操作。跨域通信通常有以下方法：</p> <h3 id="解决跨域的方法"><a href="#解决跨域的方法" class="header-anchor">#</a> 解决跨域的方法</h3> <ul><li>cors:最普遍的就是CORS，就是后端允许我们的本地的请求地址或线上域名</li> <li>jsonp:不经常用，通过script标签无视同源策略来向后端发送参数，后端返回类似函数的形式传给前端，然后前端就是调用这个函数</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>getData <span class="token operator">=</span> callback
    <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span>
    script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?callbackName=getData</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>然后这个script里面的值就是<code>&lt;script&gt;getData(data)&lt;/script&gt;</code></p> <h2 id="js有哪几种方式里检查数据类型："><a href="#js有哪几种方式里检查数据类型：" class="header-anchor">#</a> js有哪几种方式里检查数据类型：</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">&quot;cjh&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">222</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> c<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">e</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">&quot;22&quot;</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="typeof"><a href="#typeof" class="header-anchor">#</a> typeof</h3> <div class="custom-block tip"><p><em>可以判断function的类型；在判断除Object类型的对象时比较方便</em>
不能区分array和object</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token punctuation">)</span>   <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span> string
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> b<span class="token punctuation">)</span>   <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span> number
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> c<span class="token punctuation">)</span>   <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token parameter">object</span> <span class="token operator">=&gt;</span> array
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> d<span class="token punctuation">)</span>   <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token parameter">object</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Date</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> e<span class="token punctuation">)</span>   <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token keyword">function</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">typeof</span> f</span><span class="token punctuation">)</span>   <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token keyword">function</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="instanceof"><a href="#instanceof" class="header-anchor">#</a> instanceof</h3> <div class="custom-block tip"><p><em>后面一定要是对象类型，并且大小写不能错，该方法适合一些条件选择或分支</em>
挺好用的，就是要区分大小写，自己写继承类的时候用这个比较好。<br>
instanceof在对象直接继承和间接继承的都会报true。</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">alert</span><span class="token punctuation">(</span>c <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">true</span>
<span class="token function">alert</span><span class="token punctuation">(</span>d <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span>  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">true</span>
<span class="token function">alert</span><span class="token punctuation">(</span>f <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token boolean">true</span>
<span class="token function">alert</span><span class="token punctuation">(</span>f <span class="token keyword">instanceof</span> <span class="token class-name">function</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>对象的Symbol.hasInstance属性，指向一个内部方法。当其他对象使用instanceof运算符，判断是否为该对象的实例时，会调用这个方法。比如，foo instanceof Foo在语言内部，实际调用的是<code>Foo[Symbol.hasInstance](foo)</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
  <span class="token comment">// foo就是[1,2,3]</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> foo <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">new</span> <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="constructor-构造器"><a href="#constructor-构造器" class="header-anchor">#</a> constructor <em>构造器</em></h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">alert</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array<span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token boolean">true</span>
<span class="token function">alert</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Date<span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">true</span>
<span class="token function">alert</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Function<span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">true</span>
注意： constructor 在类继承时会出错
eg：
      <span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token class-name">A</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//A继承自B</span>
      <span class="token keyword">var</span> aObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>aobj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>aobj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token comment">// 而instanceof方法不会出现该问题，对象直接继承和间接继承的都会报true：</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>aobj <span class="token keyword">instanceof</span> <span class="token class-name">B</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>aobj <span class="token keyword">instanceof</span> <span class="token class-name">B</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token comment">// 言归正传，解决construtor的问题通常是让对象的constructor手动指向自己：</span>
      aobj<span class="token punctuation">.</span>constructor <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">;</span> <span class="token comment">//将自己的类赋值给对象的constructor属性</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>aobj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>aobj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token comment">//基类不会报true了;不过规范一点的话，继承后必须把constructor指向它的父类</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="prototype-tostring"><a href="#prototype-tostring" class="header-anchor">#</a> prototype.toString</h3> <div class="custom-block tip"><p><em>大小写不能写错，比较麻烦，但胜在通用</em></p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">alert</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">===</span> ‘<span class="token punctuation">[</span>object String<span class="token punctuation">]</span>’<span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">===</span> ‘<span class="token punctuation">[</span>object Number<span class="token punctuation">]</span>’<span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">===</span> ‘<span class="token punctuation">[</span>object Array<span class="token punctuation">]</span>’<span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">===</span> ‘<span class="token punctuation">[</span>object Date<span class="token punctuation">]</span>’<span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">===</span> ‘<span class="token punctuation">[</span>object Function<span class="token punctuation">]</span>’<span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token operator">===</span> ‘<span class="token punctuation">[</span>object Function<span class="token punctuation">]</span>’<span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="web安全"><a href="#web安全" class="header-anchor">#</a> WEB安全</h2> <h3 id="dns欺骗攻击"><a href="#dns欺骗攻击" class="header-anchor">#</a> DNS欺骗攻击</h3> <div class="custom-block tip"><p class="custom-block-title">DNS欺骗攻击</p> <p>DNS欺骗就是攻击者冒充域名服务器的一种欺骗行为。 原理：如果可以冒充域名服务器，然后把查询的IP地址设为攻击者的IP地址，这样的话，用户上网就只能看到攻击者的主页，而不是用户想要取得的网站的主页了，这就是DNS欺骗的基本原理。DNS欺骗其实并不是真的“黑掉”了对方的网站，而是冒名顶替、招摇撞骗罢了</p></div> <p>例如更改电脑的host文件。</p> <h3 id="ddos攻击"><a href="#ddos攻击" class="header-anchor">#</a> DDOS攻击</h3> <div class="custom-block tip"><p>分布式拒绝服务(DDoS:Distributed Denial of Service)攻击指借助于客户/服务器技术，将多个计算机联合起来作为攻击平台，对一个或多个目标发动DDoS攻击，从而成倍地提高拒绝服务攻击的威力，通过大量互联网流量压倒目标或其周围的基础架构来破坏目标服务器，服务或网络的正常流量。DDoS攻击通过利用多个受损计算机系统作为攻击流量来源来实现有效性。被利用的机器可以包括计算机和其他网络资源，例如物联网设备。从高层次来看，DDoS攻击就像堵塞高速公路的交通堵塞，阻止了常规交通到达其所需的目的地。</p> <p>由于简历TCP连接需要三次握手，DDOS会大量与服务器建立TCP半开连接（半开连接指的是没有完全三次握手的连接：SYN攻击利用TCP协议三次握手的原理，大量发送伪造源IP的SYN包也就是伪造第一次握手数据包，服务器每接收到一个SYN包就会为这个连接信息分配核心内存并放入半连接队列，如果短时间内接收到的SYN太多，半连接队列就会溢出，操作系统会把这个连接信息丢弃造成不能连接，当攻击的SYN包超过半连接队列的最大值时，正常的客户发送SYN数据包请求连接就会被服务器丢弃，每种操作系统半连接队列大小不一样所以抵御SYN攻击的能力也不一样）</p></div> <p><img src="/assets/img/ddos.ac2da8cd.jpeg" alt="">
DDoS攻击需要攻击者控制在线计算机网络才能进行攻击。计算机和其他计算机（如物联网设备）感染了恶意软件，将每个计算机转变为机器人（或僵尸）。然后，攻击者可以远程控制僵尸程序组，这称为僵尸网络。</p> <h3 id="xss"><a href="#xss" class="header-anchor">#</a> XSS</h3> <p>跨站脚步注入。xss攻击的主要目的是想办法获取目标攻击网站的cookie，因为有了cookie相当于有了session，有了这些信息就可以在任意能接进互联网的PC登陆该网站，并以其他人的身份登陆做破坏。预防措施防止下发界面显示html标签，把&lt;/&gt;等符号转义。</p> <h3 id="csrf攻击"><a href="#csrf攻击" class="header-anchor">#</a> CSRF攻击</h3> <div class="custom-block tip"><p>CSRF（Cross-site request forgery）跨站请求伪造,跨站点伪装请求。csrf攻击的主要目的是让用户在不知情的情况下攻击自己已登录的一个系统，类似于钓鱼。如用户当前已经登陆了邮箱或bbs，同时用户又在使用另外一个，已经被你控制的网站，我们姑且叫它钓鱼网站。这个网站上面可能因为某个图片吸引你，你去点击一下，此时可能就会触发一个js的点击事件，构造一个bbs发帖的请求，去往你的bbs发帖，由于当前你的浏览器状态已经是登陆状态，所以session登陆cookie信息都会跟正常的请求一样，纯天然的利用当前的登陆状态，让用户在不知情的情况下，帮你发帖或干其他事情。预防措施，请求加入随机数，让钓鱼网站无法正常伪造请求。</p></div> <p><a href="https://www.bilibili.com/video/av33502871?from=search&amp;seid=1913949786887349692" target="_blank" rel="noopener noreferrer">CSRF攻击和防御<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="syn-flooding攻击"><a href="#syn-flooding攻击" class="header-anchor">#</a> SYN Flooding攻击</h3> <div class="custom-block tip"><p class="custom-block-title">SYN Flooding攻击</p> <p>由于 TCP基于连接的，为了在服务端和客户端之间传送TCP数据，必须先建立一个虚拟电路，也就是TCP连接，建立TCP连接的过程也就是我们熟悉的“三次握手”过程：首先，请求端（客户端）发送一个包含SYN标志的TCP报文，表示客户端欲发起通信连接；第二步，服务器在收到客户端的SYN报文后，将返回一个SYN+ACK的报文，表示客户端的请求被接受；第三步，客户端也返回一个确认报文ACK给服务器端，到此一个TCP连接完成。问题就出在TCP连接的三次握手中，假设一个用户向服务器发送了SYN报文后突然死机或掉线，那么服务器在发出SYN+ACK应答报文后是无法收到客户端的ACK报文的，这种情况下服务器端一般会重试（再次发送SYN+ACK给客户端）并等待一段时间后丢弃这个未完成的连接，这段时间的长度我们称为SYN Timeout，一般来说这个时间是分钟的数量级（大约为30秒-2分钟）；如果有一个恶意的攻击者大量模拟这种情况，服务器端将为了维护一个非常大的半连接列表而消耗非常多的资源，最终导致服务器端忙于处理攻击者伪造的 TCP 连接请求而无暇理睬客户的正常请求，此时从正常客户的角度看来，服务器失去响应，这种情况我们称作：服务器端受到了SYN Flooding攻击。</p></div> <h2 id="dom事件中target，currenttarget的区别"><a href="#dom事件中target，currenttarget的区别" class="header-anchor">#</a> dom事件中target，currentTarget的区别</h2> <p>target:当前被涉及到的对象<br>
currentTarget:事件绑定的元素</p> <h2 id="vue的双向绑定"><a href="#vue的双向绑定" class="header-anchor">#</a> vue的双向绑定</h2> <div class="custom-block tip"><p>Object.defineProperty的getter和setter机制</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//object.defineProperty()</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> value<span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'get it'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span><span class="token comment">//必须return一个值，作为name属性的值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newvalue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'set it'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        value <span class="token operator">=</span> newvalue<span class="token punctuation">;</span><span class="token comment">//同步把value的值进行更新</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//get it</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token number">1234</span><span class="token punctuation">;</span><span class="token comment">//set it</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//get it</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Vue3.0更新后，用ES6的proxy代替了Object.defineProperty。</p> <h2 id="array-prototype-sort"><a href="#array-prototype-sort" class="header-anchor">#</a> Array.prototype.sort</h2> <p>Google Chrome 对 sort 做了特殊处理，对于长度 &lt;= 10 的数组使用的是插入排序(稳定排序算法) ，length &gt;10 的数组使用的是快速排序。快速排序是不稳定的排序算法。</p> <p><a href="https://segmentfault.com/a/1190000010648740" target="_blank" rel="noopener noreferrer">详解文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <div class="custom-block tip"><p class="custom-block-title">闭包</p> <p>变量的作用域与非就是两种：全局变量、局部变量<br>
函数内部可以直接读取全局变量<br>
作用：使私有变量（局部变量）能够转换被多个函数共享，而不被能解析器从内存中释放掉</p></div> <h2 id="编写一个javascript函数，传入一个数组，对数组中的元素进行去重并返回一个无重复元素的数组，数组的元素可以是数字、字符串、数组和对象。举例说明："><a href="#编写一个javascript函数，传入一个数组，对数组中的元素进行去重并返回一个无重复元素的数组，数组的元素可以是数字、字符串、数组和对象。举例说明：" class="header-anchor">#</a> 编写一个Javascript函数，传入一个数组，对数组中的元素进行去重并返回一个无重复元素的数组，数组的元素可以是数字、字符串、数组和对象。举例说明：</h2> <div class="custom-block tip"><ol><li>如传入的数组元素为[123, &quot;meili&quot;, &quot;123&quot;, &quot;mogu&quot;, 123],则输出：[123, &quot;meili&quot;, &quot;123&quot;, &quot;mogu&quot;]</li> <li>如传入的数组元素为[123, [1, 2, 3], [1, &quot;2&quot;, 3], [1, 2, 3], &quot;meili&quot;],则输出：[123, [1, 2, 3], [1, &quot;2&quot;, 3], &quot;meili&quot;]</li> <li>如传入的数组元素为[123, {a: 1}, {a: {b: 1}}, {a: &quot;1&quot;}, {a: {b: 1}}, &quot;meili&quot;],则输出：[123, {a: 1}, {a: {b: 1}}, {a: &quot;1&quot;}, &quot;meili&quot;]</li></ol></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">unique</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> hash <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">let</span> item
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Object]'</span>
      <span class="token operator">||</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Array]'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      item <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      item <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hash<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      hash<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="和-运算符判断相等的流程是怎样的"><a href="#和-运算符判断相等的流程是怎样的" class="header-anchor">#</a> ===和==运算符判断相等的流程是怎样的</h2> <h3 id=""><a href="#" class="header-anchor">#</a> ===</h3> <ul><li>如果两个值不是相同类型，它们不相等</li> <li>如果两个值都是null或者都是undefined，它们相等</li> <li>如果两个值都是布尔类型true或者都是false，它们相等</li> <li>如果其中有一个是NaN，它们不相等</li> <li>如果都是数值型并且数值相等，他们相等， -0等于0</li> <li>如果他们都是字符串并且在相同位置包含相同的16位值，他它们相等；</li> <li>如果在长度或者内容上不等，它们不相等；两个字符串显示结果相同但是编码不同==和===都认为他们不相等</li> <li>如果他们指向相同对象、数组、函数，它们相等；如果指向不同对象，他们不相等</li></ul> <h3 id="-2"><a href="#-2" class="header-anchor">#</a> ==</h3> <ul><li>如果两个值类型相同，按照===比较方法进行比较</li> <li>如果类型不同，使用如下规则进行比较</li> <li>如果其中一个值是null，另一个是undefined，它们相等</li> <li>如果一个值是数字另一个是字符串，将字符串转换为数字进行比较</li> <li>如果有布尔类型，将true转换为1，false转换为0，然后用==规则继续比较</li> <li>如果一个值是对象，另一个是数字或字符串，将对象转换为原始值然后用==规则继续比较</li> <li>其他所有情况都认为不相等</li></ul> <h3 id="object-js和"><a href="#object-js和" class="header-anchor">#</a> Object.js和===</h3> <p>Object.is() 判断两个值是否相同。如果下列任何一项成立，则两个值相同：</p> <ul><li>两个值都是<code>undefined</code></li> <li>两个值都是null</li> <li>两个值都是<code>true</code>或都是<code>false</code></li> <li>两个值是由相同个数的字符相同的顺序组成的字符串</li> <li>两个值指向同一个对象</li> <li>两个值都是数字并且</li> <li>都是正零<code>+0</code></li> <li>都是正零<code>-0</code></li> <li>都是<code>NaN</code></li> <li>都是除零和NaN外的</li></ul> <p>结论：</p> <p>这与 === 运算符的判定方式也不一样。=== 运算符（和== 运算符）将数字值 -0 和 +0 视为相等，并认为 Number.NaN 不等于 NaN。</p> <h2 id="async-await"><a href="#async-await" class="header-anchor">#</a> async/await</h2> <div class="custom-block tip"><p>为什么要使用async/await，常用promise（当你没有彻底理解promise，请先看这篇文章）的人都知道每次都需要写<code>new Promise()</code>，代码整体看起来没那么优雅，但是两个作用都是一样的，都是处理异步操作。</p></div> <p>先看一段Promise的用法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token parameter">ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'timeout'</span><span class="token punctuation">,</span>ms<span class="token punctuation">)</span>
			<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'我是传递的信息'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">print</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">timeout</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token function">resolve</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'print'</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>两秒后出现输出一下结果:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>timeout 2000
print 我是传递的信息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>现在我们用async来代替上面print函数的代码</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token parameter">ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'timeout'</span><span class="token punctuation">,</span>ms<span class="token punctuation">)</span>
			<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'我是传递的信息'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">print</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> msg
<span class="token punctuation">}</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'print'</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>输出的结果和执行的过程都是一样的，但是代码简便了很多</p> <h2 id="null-undefined"><a href="#null-undefined" class="header-anchor">#</a> null &amp;&amp; undefined</h2> <div class="custom-block tip"><p>在JavaScript规范中提到，要比较比较相等之前，不能将nullundefined转换成其他任何值，并且规定null和undefined是相等。null和undefined都代表无效的值。</p></div> <p>全等于状态下，是false，这个很好理解了。它们不属于同一类型数据。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token keyword">undefined</span> <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token keyword">typeof</span> <span class="token keyword">null</span>        <span class="token comment">//object</span>
<span class="token keyword">typeof</span> <span class="token keyword">undefined</span>       <span class="token comment">//undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="number-parseint-parsefloat"><a href="#number-parseint-parsefloat" class="header-anchor">#</a> Number &amp;&amp; parseInt &amp;&amp; parseFloat</h2> <h3 id="number"><a href="#number" class="header-anchor">#</a> Number</h3> <p>如果是Boolean值，true和false值将分别被转换为1和0。<br>
如果是数字值，只是简单的传入和返回。<br>
如果是null值，返回0。<br>
如果是undefined，返回NaN。<br>
如果是字符串：<br></p> <ul><li>如果字符串中只包含数字时，将其转换为十进制数值，即“1”变成1，“123”变成123，而“011”会变成11</li> <li>如果字符串中包含有效的浮点格式，如“1.1”，则将其转换为对应的浮点数值</li> <li>如果字符串中包含有效的十六进制格式，例如“0xf”，则将其转换为相同大小的十进制整数值</li> <li>如果字符串是空的（不包含任何字符），则将其转换为0</li> <li>如果字符串中包含除上述格式之外的字符，则将其转换成NaN</li></ul> <h3 id="parseint"><a href="#parseint" class="header-anchor">#</a> parseInt</h3> <p>在转换字符串时，更多的是看是否符合数值模式。会忽略字符串前面的空格，直至找到第一个非空格字符。</p> <ul><li>如果第一个字符不是数字字符或负号，<code>parseInt()</code>就会返回NaN，也就是说用<code>parseInt()</code>转换空字符时会返回NaN</li> <li>如果第一个字符串是数字字符，parseInt()会继续解析第二个字符，直到解析完所有后续字符或者遇到一个非数字字符。例如，“123blue”会被转换为123，因为“blue”会被完全忽略，类似低“22.5”会被转换成22，因为小数点不是有效数字字符</li> <li>如果字符串以“0x”开头且后跟数字字符，就会将其当作一个十六进制整数</li> <li>如果字符串以“0”开头且后跟数字字符，就会将其当作一个八进制整数</li> <li>parseInt()函数增加了第二参数用于指定转换时使用的基数（即多少进制）
<code>parseInt(&quot;10&quot;,16)//按十六进制解析</code> <code>parseInt(&quot;10&quot;,8)//按八进制解析</code></li></ul> <h3 id="parsefloat"><a href="#parsefloat" class="header-anchor">#</a> parseFloat</h3> <p>与parseInt类似，parseFloat也是con第一个字符开始解析每个字符，而且也是一直解析到字符串末尾，或者解析到遇见一个无效的浮点数字字符。也就是说，字符串的第一个小数点是有效的，而第二个小数点就是无效的，因此它后面的字符串将被忽略。例如“22.34.5”将会转换为22.34。<br>
除了第一个小数点有效之外，parseFloat与parseInt的第二个区别在与它始终都会忽略前导的零。<br>
parseFloat()只解析十进制值，因此它没有用第二个参数指定基数的用法。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> num1<span class="token operator">=</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&quot;1234blue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//1234</span>

<span class="token keyword">var</span> num2<span class="token operator">=</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&quot;0xA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">//0</span>

<span class="token keyword">var</span> num3<span class="token operator">=</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&quot;0908.5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//908.5</span>

<span class="token keyword">var</span> num4<span class="token operator">=</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&quot;3.125e7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//31250000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-block tip"><p>ECMAScript定义了isNaN()函数。这个函数接受一个参数，该参数可以是任何类型，而函数会帮我们确定这个参数是否“不是数值”。isNaN()在接收到一个值之后，会尝试将这个值转换为数值。不能转换为数值的参数会返回true。</p></div> <h2 id="event-loop"><a href="#event-loop" class="header-anchor">#</a> Event Loop</h2> <div class="custom-block tip"><p>在<code>JavaScript</code>中，任务被分为两种，一种宏任务（MacroTask）也叫Task，一种叫微任务（MicroTask）。JS会创建一个类似while(true)的循环，每执行一次循环体的过程称之为Tick。每次Tick的过程就是查看是否有待处理事件，如果有则取出相关事件及回调函数放入执行栈中有主线程执行。待处理的事件会存储在一个任务队列中，也就是每次Tick会查看任务队列中是否有需要执行的任务。</p> <p>异步操作会将相关回调添加到任务队列中。而不同的异步操作添加到任务队列的时机也不同，如onClick、setTimeout、ajax处理的方式都不同，这些异步操作是由浏览器内核的<code>webcore</code>来执行的，<code>webcore</code>包含<code>DOM Binding</code>、<code>network</code>、<code>timer</code>模块</p> <p>比如: onClick由浏览器内核的DOM Binding模块来处理，当事件触发的时候，回调函数会立即添加到任务队列中。</p></div> <h3 id="macrotask（宏任务）"><a href="#macrotask（宏任务）" class="header-anchor">#</a> MacroTask（宏任务）</h3> <p><code>script</code>全部代码、setTimeout、setINterval、I/0、UI Rendering、setImmediate</p> <h3 id="microtask（微任务）"><a href="#microtask（微任务）" class="header-anchor">#</a> MicroTask（微任务）</h3> <p>Process.nextTick（Node独有）、Promise、MutationObserver（具体使用方式<a href="http://javascript.ruanyifeng.com/dom/mutationobserver.html" target="_blank" rel="noopener noreferrer">查看<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</p> <h3 id="浏览器中的event-loop"><a href="#浏览器中的event-loop" class="header-anchor">#</a> 浏览器中的Event Loop</h3> <p>JS有一个<code>main thread</code>主线程和<code>call-stack</code>调用栈（执行栈），所有的任务都会被放到调用栈等待主线程执行。</p> <h3 id="js调用栈"><a href="#js调用栈" class="header-anchor">#</a> JS调用栈</h3> <p>JS调用栈采用的是后进先出的规则，当函数执行的时候，会被添加到栈的顶部，当执行栈执行完成后，就会从栈顶移出，直到栈内被清空。
<img src="/assets/img/event_loop1.1ba5742d.png" alt=""></p> <h3 id="同步任务和异步任务"><a href="#同步任务和异步任务" class="header-anchor">#</a> 同步任务和异步任务</h3> <p><code>JS</code>单线程任务被分为同步任务和异步任务，同步任务会在调用栈按照顺序等待主线程依次执行，异步任务会在异步任务有了结果后，将注册的回调函数放入任务队列中等待主线程空闲的时候（调用栈被清空），被读取到栈内等待主线程的执行。</p> <p>任务队列<code>Task Queue</code>，是一种先进先出的数据结构。
<img src="/assets/img/event_loop2.4e32624f.png" alt=""></p> <ul><li>选择当前要执行的任务队列，选择任务队列中最先进进入的任务，如果任务队列为空时，则执行跳转到微任务(MicroTask)的执行步骤。</li> <li>将事件循环中的任务设置为已选择任务。</li> <li>执行任务</li> <li>将事件循环中当前运行任务设置null</li> <li>将已经运行完成的任务从任务队列在删除。</li> <li>MicroTasks步骤：进入MicroTask检查点</li> <li>更新页面渲染（人工赋值）</li> <li>返回第一步
<strong>举个例子</strong></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>打印结果：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>script start =》 先执行宏任务中script
script end =》 先执行宏任务中script
promise1 =》 再执行微任务中的promise,执行完又将then推到微任务
promise2  =》 检查微任务队列，再次执行微任务
setTimeout =》 微任务为空回来执行宏任务
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>再来看个例子</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise11'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise22'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>打印结果：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>script start =》 先执行宏任务中script

script end =》 先执行宏任务中script

promise1 =》 再执行微任务中的promise，然后将then再次推到微任务队列

promise11 =》 promise11在promise2的前面是因为，执行完promise1才会执行then，而promise11是一开始就和promise1一起放在微任务队列的
promise2
promise22
setTimeout =》 微任务为空回来执行宏任务
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>再来看个例子</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> onePromise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请求数据...'</span><span class="token punctuation">)</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 同步代码执行到这里时 twoPromise的状态为pending</span>
<span class="token keyword">const</span> twoPromise <span class="token operator">=</span> onePromise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myPromise<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
twoPromise<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'catch'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
onePromise<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'another'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>代码从头执行到尾：</p> <ol><li>执行到<code>new Promise</code>时直接里面的函数，打印<code>console.log('请求数据...')</code>，将<code>setTimeout</code>放入<code>宏队列</code>['setTimeout']</li> <li>执行<code>onePromise.then</code>，将函数放入onePromise的resolve状态队列中</li> <li>执行到<code>twoPromise.catch</code>，将函数放入twoPromise的reject状态队列中</li> <li>执行到<code>onePromise.catch</code>，将函数放入onePromise的reject状态队列中</li> <li>执行宏任务队列中['setTimeout']的setTimeout，执行reject(1)，</li> <li>导致<code>onePromise</code>状态改变为rejected，执行reject状态队列，也就是执行<code>onePromise.catch</code>，把<code>console.log('another', error)</code>放入微队列中，此时twoPromise的状态也随着onePromise的改变过渡过来，</li> <li>twoPromise的状态改变后触发reject状态队列，把<code>twoPromise.catch</code>放入微队列中。</li> <li>执行微队列中的任务
执行结果：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>请求数据<span class="token operator">...</span>
another <span class="token number">1</span>
catch <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="形参-默认参数"><a href="#形参-默认参数" class="header-anchor">#</a> 形参&amp;&amp;默认参数</h2> <p>函数作用域里面优先找变量</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>test<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>data={...data}</code>相当于<code>let a = a</code>导致定义<code>a</code>变量时同时赋值<code>a</code>变量所以会报错</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>test<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">...</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// {...data} =&gt; data is not defined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>默认参数相当于是赋值，向上函数外面寻找变量</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>test<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">...</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    conso
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// { test: 1 }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="js中的捕获和冒泡"><a href="#js中的捕获和冒泡" class="header-anchor">#</a> JS中的捕获和冒泡</h2> <div class="custom-block tip"><p class="custom-block-title">Dom事件流</p> <p>don事件流分成三个阶段：</p> <p>捕获阶段：通过从目标的祖先中的事件对象传播窗口到目标的父。此阶段也称为捕获阶段。</p> <p>目标阶段：本次活动对象到达事件对象的事件的目标。此阶段也称为目标阶段。如果事件类型指示事件不会冒泡，则事件对象将在此阶段完成后停止。</p> <p>气泡阶段：通过以相反的顺序目标的祖先中的事件对象传播，开始与目标的父和与所述结束窗口。此阶段也称为冒泡阶段。</p></div> <p>捕获阶段：首先只有在<code>addEventListener</code>的第三个参数为true时才能触发事件捕获，从当前设置的true的元素，一直往下找并且触发同类型事件。</p> <p>目标阶段： 捕获一直往下找，直到当前点击的元素。</p> <p>冒泡阶段：执行完目标本身事件后就开始冒泡阶段，冒泡事件是比较常见的，因为默认<code>addEventListener</code>的第三个参数为false，所以平常的所写的ele.onclick事件都是默认冒泡的，冒泡就是从当前点击的元素一级一级往上同类型的事件并且触发。</p> <p>看个例子：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>div1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>div2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>button1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>click me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    　　<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;div1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;button1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> div2 <span class="token operator">=</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;div2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;1 div1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;2 div1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      div2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;1 div2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;1 button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;2 button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">点击按钮后，结果：</p> <p>捕获阶段：1 div1
目标阶段：1 button -&gt; 2 button
冒泡阶段：1 div2 -&gt; 2 div1</p></div> <p>让我们再改改<code>addEventListener</code>的第三个参数:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>div1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>div2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>button1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>click me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    　<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;div1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;button1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> div2 <span class="token operator">=</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;div2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;1 div1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;2 div1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      div2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;1 div2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;1 button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;2 button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">点击按钮后，结果：</p> <p>捕获阶段：1 div1 -&gt; 1 div2
目标阶段：1 button -&gt; 2 button  // 到了目标阶段，也就是<code>target</code>本身，不管<code>useCapture</code>是否为true，都不能提升代码中顺序事件的触发
冒泡阶段：2 div1</p></div> <h2 id="seal-freeze-preventextensions"><a href="#seal-freeze-preventextensions" class="header-anchor">#</a> seal &amp;&amp; freeze &amp;&amp; preventExtensions</h2> <h3 id="object-seal"><a href="#object-seal" class="header-anchor">#</a> Object.seal</h3> <div class="custom-block tip"><p><code>Object.seal</code>方法可以密封对象，从而防止向其添加新属性，并将所有现有属性标记为<strong>不可配置</strong>，只要可写，当前属性的值仍可以更改。所以还是可以在<code>__proto__</code>添加属性。</p></div> <p>返回值:
被密封的对象。
例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> object1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  property1<span class="token operator">:</span> <span class="token number">42</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span>object1<span class="token punctuation">)</span><span class="token punctuation">;</span>
object1<span class="token punctuation">.</span>property1 <span class="token operator">=</span> <span class="token number">33</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>object1<span class="token punctuation">.</span>property1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: 33</span>

<span class="token keyword">delete</span> object1<span class="token punctuation">.</span>property1<span class="token punctuation">;</span> <span class="token comment">// cannot delete when sealed</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>object1<span class="token punctuation">.</span>property1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: 33</span>

<span class="token keyword">let</span> bb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span>bb<span class="token punctuation">)</span>
bb<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>test <span class="token operator">=</span> <span class="token number">1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>test<span class="token punctuation">)</span>
<span class="token comment">//expected output: 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="object-freeze"><a href="#object-freeze" class="header-anchor">#</a> Object.freeze</h3> <div class="custom-block tip"><p>冻结的对象无法再更改。冻结对象可防止向其添加新属性、删除现有属性、更改现有属性的可枚举性，可配置或可写性、更改现有属性的值。之外，冻结对象还可以防止更改其原型（<code>__proto__</code>不能被更改）。</p></div> <p>返回值:<br>
被冻结的对象（与传入值一样）。<br>
例子：<br></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  prop<span class="token operator">:</span> <span class="token number">42</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'prop'</span><span class="token punctuation">)</span>
<span class="token comment">// expected output:</span>
<span class="token comment">// configurable: true</span>
<span class="token comment">// enumerable: true</span>
<span class="token comment">// value: 42</span>
<span class="token comment">// writable: true</span>
Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'prop'</span><span class="token punctuation">)</span>
<span class="token comment">// expected output:</span>
<span class="token comment">// configurable: false</span>
<span class="token comment">// enumerable: true</span>
<span class="token comment">// value: 42</span>
<span class="token comment">// writable: false</span>
obj<span class="token punctuation">.</span>prop <span class="token operator">=</span> <span class="token number">33</span><span class="token punctuation">;</span>
<span class="token comment">// Throws an error in strict mode</span>
obj<span class="token punctuation">.</span>test <span class="token operator">=</span> <span class="token number">1</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>test<span class="token punctuation">)</span>
<span class="token comment">// expected output: undefined</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: 42</span>

obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token punctuation">{</span>test<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>
<span class="token comment">// expected output: Uncaught TypeError: #&lt;Object&gt; is not extensible</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="object-preventextensions"><a href="#object-preventextensions" class="header-anchor">#</a> Object.preventExtensions</h3> <div class="custom-block tip"><p>防止将新属性添加到对象</p></div> <p>例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> object1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span>object1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>object1<span class="token punctuation">,</span> <span class="token string">'property1'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token number">42</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Expected output: TypeError: Cannot define property property1, object is not extensible</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="结论"><a href="#结论" class="header-anchor">#</a> 结论</h3> <ul><li>Object.seal: 防止向其添加新属性，并将所有现有属性标记为不可配置</li> <li>Object.freeze: 止向其添加新属性、删除现有属性、更改现有属性的可枚举性，可配置或可写性、更改现有属性的值,<code>__proto__</code>也不让更改</li> <li>Object.preventExtensions: 防止向其添加新属性</li></ul> <p>那么可以用<code>Object.isExtensible()</code>判断是否可以为其添加新属性，不要是不可扩展的就会返回<code>false</code></p> <h2 id="伪类-伪元素"><a href="#伪类-伪元素" class="header-anchor">#</a> 伪类&amp;&amp;伪元素</h2> <h3 id="伪类"><a href="#伪类" class="header-anchor">#</a> 伪类</h3> <div class="custom-block tip"><ol><li>伪类存在的意义是为了通过选择器找到那些不存在与DOM树中的信息以及不能被常规CSS选择器获取到的信息。</li> <li>伪类由一个冒号:开头，冒号后面是伪类的名称和包含在圆括号中的可选参数。</li> <li>任何常规选择器可以再任何位置使用伪类。伪类语法不区别大小写。一些伪类的作用会互斥，另外一些伪类可以同时被同一个元素使用。并且，为了满足用户在操作DOM时产生的DOM结构改变，伪类也可以是动态的。</li></ol></div> <h3 id="伪元素"><a href="#伪元素" class="header-anchor">#</a> 伪元素</h3> <div class="custom-block tip"><ol><li>伪元素在DOM树中创建了一些抽象元素，这些抽象元素是不存在于文档语言里的，比如：document接口不提供访问元素内容的第一个字或者第一行的机制，而伪元素可以使开发者可以提取到这些信息。并且，一些伪元素可以使开发者获取到不存在于源文档中的内容（比如常见的::before,::after）。</li> <li>伪元素的由两个冒号::开头，然后是伪元素的名称。</li> <li>使用两个冒号<code>::</code>是为了区别伪类和伪元素（CSS2中并没有区别）。当然，考虑到兼容性，CSS2中已存的伪元素仍然可以使用一个冒号<code>:</code>的语法，但是CSS3中新增的伪元素必须使用两个冒号<code>::</code>。</li></ol></div> <h2 id="json-parse"><a href="#json-parse" class="header-anchor">#</a> JSON.parse</h2> <div class="custom-block tip"><p>参数:</p> <ol><li>text： 要被解析成JavaScript值的字符串，关于JSON的语法格式</li> <li>reviver：转换器, 如果传入该参数(函数)，可以用来修改解析生成的原始值，调用时机在parse函数返回之前。注意：解析值本身以及它所包含的所有属性，会按照一定的顺序（从最最里层的属性开始，一级级往外，最终到达顶层，也就是解析值本省）</li></ol></div> <p>例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'[1, 2, 3, 4]'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">k<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'k'</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> <span class="token string">'v'</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">return</span> v<span class="token punctuation">;</span>     <span class="token comment">// 如果到了最顶层，则直接返回属性值，</span>
    <span class="token keyword">return</span> v <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>              <span class="token comment">// 否则将属性值变为原来的 2 倍。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Expected output</span>
<span class="token comment">// k 0 v 1</span>
<span class="token comment">// 2 k 1 v 2</span>
<span class="token comment">// 2 k 2 v 3</span>
<span class="token comment">// 2 k 3 v 4</span>
<span class="token comment">// 2 k  v (4) [2, 4, 6, 8]</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'{&quot;p&quot;: 5}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">k<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'k'</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> <span class="token string">'v'</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">return</span> v<span class="token punctuation">;</span>     <span class="token comment">// 如果到了最顶层，则直接返回属性值，</span>
    <span class="token keyword">return</span> v <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>              <span class="token comment">// 否则将属性值变为原来的 2 倍。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Expected output</span>
<span class="token comment">// k p v 5</span>
<span class="token comment">// 2 k  v {p: 10}</span>
<span class="token punctuation">{</span>p<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'{&quot;p&quot;:{&quot;test&quot;:1}}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">k<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'k'</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> <span class="token string">'v'</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span>
    <span class="token keyword">return</span> v<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Expected output</span>
<span class="token comment">// k test v 1</span>
<span class="token comment">// k p v {test: 1}</span>
<span class="token comment">// k  v p: {test: 1}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="json-stringify"><a href="#json-stringify" class="header-anchor">#</a> JSON.stringify</h2> <div class="custom-block tip"><p>参数：</p> <ol><li>value：将要序列化成一个JSON字符串的值</li> <li>replacer(可选)：如果该参数是一个函数，则在序列化过程中，被序列化的值的每个属性都会经过该函数的转换和处理；如果该参数是一个数组，则只有包含在这个数组中的属性名才会被序列化到最终的 JSON 字符串中；如果该参数为null或者未提供，则对象所有的属性都会被序列化；</li> <li>space(可选)：指定缩进用的空白字符串，用于美化输出（pretty-print）；如果参数是个数字，它代表有多少的空格；上限为10。该值若小于1，则意味着没有空格。如果该参数没有提供（或者为null）将没有空格。</li></ol></div> <p>例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">replacer</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  <span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span> foundation<span class="token operator">:</span> <span class="token string">&quot;Mozilla&quot;</span><span class="token punctuation">,</span> model<span class="token operator">:</span> <span class="token string">&quot;box&quot;</span><span class="token punctuation">,</span> month<span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">}</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> replacer<span class="token punctuation">)</span>
<span class="token comment">// 可以看出来JSON.stringify是从外层向内层进行遍历的，而JSON.parse是从最内层开始往外遍历</span>
<span class="token comment">// Expected output</span>
<span class="token comment">// key  value { foundation: 'Mozilla', model: { test: 1 }, month: 7 }</span>
<span class="token comment">// key foundation value Mozilla</span>
<span class="token comment">// key model value { test: 1 }</span>
<span class="token comment">// key test value 1</span>
<span class="token comment">// key month value 7</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>如果replacer是一个数组，数组的值代表将被序列化成JSON字符串的属性名。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> replacer <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'foundation'</span><span class="token punctuation">,</span> <span class="token string">'model'</span><span class="token punctuation">]</span>

<span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span> foundation<span class="token operator">:</span> <span class="token string">&quot;Mozilla&quot;</span><span class="token punctuation">,</span> model<span class="token operator">:</span> <span class="token string">&quot;box&quot;</span><span class="token punctuation">,</span> month<span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> replacer<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 只保留'foundation'和'model'属性值。</span>
<span class="token comment">// Expected output</span>
<span class="token comment">// {&quot;foundation&quot;:&quot;Mozilla&quot;,&quot;model&quot;:&quot;box&quot;}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如果一个被序列化的对象拥有 toJSON 方法，那么该 toJSON 方法就会覆盖该对象默认的序列化行为：不是那个对象被序列化，而是调用 toJSON 方法后的返回值会被序列化</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">toJSON</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'bar'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// '&quot;bar&quot;'</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> obj<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '{&quot;x&quot;:&quot;bar&quot;}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="浏览器缓存"><a href="#浏览器缓存" class="header-anchor">#</a> 浏览器缓存</h2> <div class="custom-block tip"><p>强缓存：不与服务器沟通，直接拿浏览器本地的缓存使用：expires、Cache-Control:max-age
协商缓存：与服务器沟通，对比hash或者时间，看看是否要取浏览器本地的数据：ETag,Last-Modify</p></div> <h3 id="last-modify"><a href="#last-modify" class="header-anchor">#</a> Last-Modify</h3> <div class="custom-block tip"><p><code>Last-Modified</code>是一个响应头部，其中包含源头服务器认定的资源做出修改的日期及时间。 它通常被用作一个验证器来判断接收到的或者存储的资源是否彼此一致。由于精确度比<code>ETag</code>要低（因为日期只能精确到秒，而服务器更改文件可以在一秒内更改多次），所以这是一个备用机制。包含有<code>If-Modified-Since</code>或<code>If-Unmodified-Since</code>首部的条件请求会使用这个字段。
::
在server端我们还需要加上头Last-Modified。收到带Last-Modified这个头，下次浏览器发送request就会带上If-Modified-Since或者If-Unmodified-Since，服务器收到这个request的If-Modified-Since后，通过读取它的值对比资源存在的地方的Last-Modified，服务器就告诉浏览器是否可以使用缓存。</p> <h3 id="expires"><a href="#expires" class="header-anchor">#</a> Expires</h3> <p>无效的日期，比如 0, 代表着过去的日期，即该资源已经过期。</p> <p>如果在Cache-Control响应头设置了 &quot;max-age&quot; 或者 &quot;s-max-age&quot; 指令，那么 Expires 头会被忽略。</p> <h3 id="cache-control"><a href="#cache-control" class="header-anchor">#</a> Cache-Control</h3> <p>经常用的以下指令：</p> <h4 id="no-cache"><a href="#no-cache" class="header-anchor">#</a> no-cache</h4> <p>在发布缓存副本之前，强制要求缓存把请求提交给原始服务器进行验证。比如响应头的<code>ETag</code>和客户端发送的<code>If-None-Match</code>字段互相校验判断是否是304状态。</p> <h4 id="no-store"><a href="#no-store" class="header-anchor">#</a> no-store</h4> <p>缓存不应存储有关客户端请求或服务器响应的任何内容。就是每次都是请求服务器的数据。</p> <h4 id="max-age-seconds"><a href="#max-age-seconds" class="header-anchor">#</a> max-age=&lt;<code>seconds</code>&gt;</h4> <p>设置缓存存储的最大周期，超过这个时间缓存被认为过期(单位秒)。与Expires相反，时间是相对于请求的时间。会覆盖Expires属性。</p> <h3 id="etag"><a href="#etag" class="header-anchor">#</a> ETag</h3> <div class="custom-block tip"><p>ETagHTTP响应头是资源的特定版本的标识符。这可以让缓存更高效，并节省带宽，因为如果内容没有改变，Web服务器不需要发送完整的响应。而如果内容发生了变化，使用ETag有助于防止资源的同时更新相互覆盖（“空中碰撞”）</p></div></div> <p>Etag是一个更加严格的验证，它是根据文件的内容生成Etag（数据签名，最常用做法是对资源内容进行哈希计算），收到带Etag这个头，下次浏览器发送request就会带上If-Match或者If-Non-Match，服务器收到这个request的上If-Match或者If-Non-Match后，通过读取它的值对比资源存在的地方的Etag，服务器就告诉浏览器是否可以使用缓存</p></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/29/2021, 6:02:32 AM</span></div></footer> <!----></main> <!----> <div style="display:none;" data-v-146b4d24 data-v-146b4d24><div class="comments-wrapper" data-v-146b4d24><div class="valine-wrapper"><div id="valine"></div></div></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-44bd5a18 data-v-44bd5a18><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-44bd5a18><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-44bd5a18></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-44bd5a18></path></svg></div></div></div>
    <script src="/assets/js/app.6ab3bd45.js" defer></script><script src="/assets/js/3.1aa11fd0.js" defer></script><script src="/assets/js/1.26bd7cad.js" defer></script><script src="/assets/js/9.3fc43e54.js" defer></script>
  </body>
</html>
